%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%
% MATLAB SCIPT TO PLOTS THE RESULTS OF THE PREVIOUS TASK
%
% Last edition: 21.12.2021
% Author: Raphael Uebersax
%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

clear all;
close all;
clc;

addpath("../Tools");
addpath("../Regressors");
addpath("./Task9_tools");
rng('default');


%% 0) Variables and constraints

% Select one task
Task = "Polar_DS";      
%Task = "Linear_DS";


%% 1) Import results from data folder

if strcmp(Task,"Linear_DS")
    data_q = load("data/Linear_DS_qs.mat");
    data_q = data_q.data_q;
    data_x = load("data/Linear_DS_xs.mat");
    data_x = data_x.data_x;
    nb_trajectories = 100;
    nb_points_per_traj = 50;
        
    
elseif strcmp(Task,"Polar_DS")
    data_q = load("data/Polar_DS_qs.mat");
    data_q = data_q.data_q;
    data_x = load("data/Polar_DS_xs.mat");
    data_x = data_x.data_x;
    nb_trajectories = 100;
    nb_points_per_traj = 100;
end

%% plots
figure
title("Task space analysis")
for idx =1:7
    ax(idx) = subplot(2,4,idx);
    scatter(data_q(:,idx),data_q(:,7+idx),'*')
    name1 = ['$q_{',rats(idx), '}$ [rad]'];
    name2 = ['$\dot{q_{',rats(idx), '}}$ [rad/s]'];
    xlabel(name1,'fontsize',16,'interpreter','latex')
    ylabel(name2,'fontsize',16,'interpreter','latex')
end

X = data_x;
if strcmp(Task,"Linear_DS")
    figure
    plot3(0.5,0.5,0.5,'o')
    hold on
    xlabel("X [m]")
    ylabel("Y [m]")
    zlabel("Z [m]")
    for k=1:nb_trajectories
        i_s = 1+(k-1)*nb_points_per_traj;
        i_end = i_s + nb_points_per_traj-1;
        plot3(X(i_s:i_end,1),X(i_s:i_end,2),X(i_s:i_end,3))
    end
elseif strcmp(Task,"Polar_DS")
    figure
    plot(0.5,0.5,'o')
    hold on
    xlabel("X [m]")
    ylabel("Y [m]")
    for k=1:nb_trajectories
        i_s = 1+(k-1)*nb_points_per_traj;
        i_end = i_s + nb_points_per_traj-1;
        plot(X(i_s:i_end,1),X(i_s:i_end,2))
    end
end

